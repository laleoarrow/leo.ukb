[{"path":"https://laleoarrow.github.io/leo.ukb/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Ao Lu. Author, maintainer, copyright holder.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Lu (2026). leo.ukb: LEO package UK Biobank database analysis. R package version 0.5.1, https://laleoarrow.github.io/leo.ukb/.","code":"@Manual{,   title = {leo.ukb: LEO package for UK Biobank database analysis},   author = {Ao Lu},   year = {2026},   note = {R package version 0.5.1},   url = {https://laleoarrow.github.io/leo.ukb/}, }"},{"path":"https://laleoarrow.github.io/leo.ukb/index.html","id":"leoukb-","dir":"","previous_headings":"","what":"LEO package for UK Biobank database analysis","title":"LEO package for UK Biobank database analysis","text":"leo.ukb internal toolkit working UK Biobank (UKB) data. provides small set helper functions streamline common workflows—field parsing/decoding, format conversion, batch processing, preparing analysis-ready datasets—large-scale biomedical studies. Note: package intended academic research purposes. code functionalities experimental subject change.  UK Biobank UKB Showcase UKB Schema","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"LEO package for UK Biobank database analysis","text":"","code":"# Install from GitHub (requires access permission) remotes::install_github(\"laleoarrow/leo.ukb\")"},{"path":"https://laleoarrow.github.io/leo.ukb/index.html","id":"license","dir":"","previous_headings":"","what":"License","title":"LEO package for UK Biobank database analysis","text":"software proprietary. rights reserved. See LICENSE details.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/combine_two_eye.html","id":null,"dir":"Reference","previous_headings":"","what":"Combine Measurements from Two Eyes — combine_two_eye","title":"Combine Measurements from Two Eyes — combine_two_eye","text":"Combines two numeric vectors representing measurements two eyes single vector using specified method (mean, max, min). Handles NA values appropriately.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/combine_two_eye.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Combine Measurements from Two Eyes — combine_two_eye","text":"","code":"combine_two_eye(vector1, vector2, method = c(\"mean\", \"max\", \"min\"))"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/combine_two_eye.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Combine Measurements from Two Eyes — combine_two_eye","text":"vector1 Numeric vector first eye. vector2 Numeric vector second eye. method Method combine two vectors: \"mean\", \"max\", \"min\". Default \"mean\".","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/combine_two_eye.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Combine Measurements from Two Eyes — combine_two_eye","text":"numeric vector combined values.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/convert_iop.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert IOP Measurements — convert_iop","title":"Convert IOP Measurements — convert_iop","text":"function converts intraocular pressure (IOP) measurements replacing \"无\" NA converting rest numeric.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/convert_iop.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert IOP Measurements — convert_iop","text":"","code":"convert_iop(data, iop_cols)"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/convert_iop.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert IOP Measurements — convert_iop","text":"data data frame containing IOP data. iop_cols character vector IOP column names data converted.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/convert_iop.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert IOP Measurements — convert_iop","text":"data frame specified IOP columns converted numeric, \"无\" NA.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/convert_iop.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convert IOP Measurements — convert_iop","text":"","code":"# Simulated IOP data，含单位与缺失写法 iop_df <- tibble::tibble(   id = 1:6,   iop_od = c(\"15\",\"无\",\"18mmHg\",\">30\",\"-\",\"N/A\"),   iop_os = c(\"16\",\"未测\",\"14.5\",\"12mmHg\",\"NA\",\"20\") ) convert_iop(iop_df, c(\"iop_od\",\"iop_os\")) #> # A tibble: 6 × 3 #>      id iop_od iop_os #>   <int>  <dbl>  <dbl> #> 1     1     15   16   #> 2     2     NA   NA   #> 3     3     18   14.5 #> 4     4     30   12   #> 5     5     NA   NA   #> 6     6     NA   20"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/convert_to_logMAR.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert Visual Acuity Measurements to logMAR — convert_to_logMAR","title":"Convert Visual Acuity Measurements to logMAR — convert_to_logMAR","text":"Handles numeric decimals special terms: CF, HM, LP, NLP, Chinese synonyms.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/convert_to_logMAR.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert Visual Acuity Measurements to logMAR — convert_to_logMAR","text":"","code":"convert_to_logMAR(data, acuity_cols, term_map = NULL)"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/convert_to_logMAR.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert Visual Acuity Measurements to logMAR — convert_to_logMAR","text":"data data frame containing visual acuity data. acuity_cols Character vector column names data converted.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/convert_to_logMAR.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert Visual Acuity Measurements to logMAR — convert_to_logMAR","text":"data frame specified columns converted numeric logMAR values.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/convert_to_logMAR.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convert Visual Acuity Measurements to logMAR — convert_to_logMAR","text":"","code":"va_df <- tibble::tibble(   id = 1:5,   bcva_od = c(\"1.0\",\"0.8\",\"CF\",\"LP\",\"NLP\"),   bcva_os = c(\"0.6\",\"HM\",\"0.3\",\"1.2\",\"0.1\") ) convert_to_logMAR(va_df, c(\"bcva_od\",\"bcva_os\")) #> # A tibble: 5 × 3 #>      id bcva_od bcva_os #>   <int>   <dbl>   <dbl> #> 1     1  0       0.222  #> 2     2  0.0969  2.3    #> 3     3  2       0.523  #> 4     4  2.6    -0.0792 #> 5     5  2.9     1"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/diagnosis_process_fo.html","id":null,"dir":"Reference","previous_headings":"","what":"Process first occurrence (FO) data in UKB —- — diagnosis_process_fo","title":"Process first occurrence (FO) data in UKB —- — diagnosis_process_fo","text":"Processes UK Biobank first occurrence data survival analysis, handling abnormal dates, censoring, generating status/time variables.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/diagnosis_process_fo.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Process first occurrence (FO) data in UKB —- — diagnosis_process_fo","text":"","code":"diagnosis_process_fo(   data,   fo_date_col,   censored = \"2025-01-01\",   base_line = \"p53_i0\",   filter_NA = T )"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/diagnosis_process_fo.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Process first occurrence (FO) data in UKB —- — diagnosis_process_fo","text":"data Dataframe UKB baseline / FO / death dates. fo_date_col Column name (string) first occurrence date use. censored Censoring date (character, \"YYYY-MM-DD\"). filter_NA Logical, whether filter rows NA resulting status/time columns. Default TRUE.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/diagnosis_process_fo.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Process first occurrence (FO) data in UKB —- — diagnosis_process_fo","text":"Dataframe eid, disease_prefix_status, disease_prefix_time.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/diagnosis_process_fo.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Process first occurrence (FO) data in UKB —- — diagnosis_process_fo","text":"","code":"# Simulated UKB data ukb_df <- tibble::tibble(   eid = 1:6,   p53_i0 = as.Date(c(\"2006-01-01\", \"2007-05-15\", \"2008-03-20\", \"2009-07-30\", \"2010-11-11\", \"2011-12-25\")),   p191 = as.Date(c(\"2020-01-01\", \"2021-06-15\", NA, \"2022-03-20\", \"2023-07-30\", \"2024-11-11\")),   p40000_i0 = as.Date(c(NA, \"2022-05-05\", \"2023-08-08\", NA, \"2024-09-09\", NA)),   p40000_i1 = as.Date(c(\"2023-01-01\", NA, NA, \"2024-04-04\", NA, \"2025-12-12\")),   p20002_0_0 = as.Date(c(\"2015-01-01\", \"2016-02-02\", \"1900-01-01\", NA, \"2018-03-03\", \"2019-04-04\")) ) diagnosis_process_fo(ukb_df, \"p20002_0_0\", censored = \"2025-01-01\") # This is the results. #> ℹ [15:27:59] diagnosis_process_fo: processing [p20002_0_0] using [2025-01-01] as censored date. #> ℹ [15:27:59] diagnosis_process_fo: combining death dates p40000_i0 and p40000_i1. #> ℹ [15:27:59] diagnosis_process_fo: detected <1> abnormal FO dates in [p20002_0_0], recoding to NA. #> ℹ [15:27:59] diagnosis_process_fo: filtered NA - rows before: 6, after: 5. #> ✔ [15:27:59] diagnosis_process_fo: created [p20002_status] and [p20002_time] - ALL DONE. #> # A tibble: 5 × 3 #>     eid p20002_status p20002_time #>   <int>         <int>       <dbl> #> 1     1             1        9.01 #> 2     2             1        8.73 #> 3     4             0       12.6  #> 4     5             1        7.31 #> 5     6             1        7.28"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/diagnosis_process_icd.html","id":null,"dir":"Reference","previous_headings":"","what":"Process UKB ICD data for survival analysis — diagnosis_process_icd","title":"Process UKB ICD data for survival analysis — diagnosis_process_icd","text":"Generate icd_code_status icd_code_time UKB ICD records.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/diagnosis_process_icd.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Process UKB ICD data for survival analysis — diagnosis_process_icd","text":"","code":"diagnosis_process_icd(   data,   icd_code,   icd = 10,   censored = \"2025-01-01\",   icd_rank = 1,   baseline_date = \"p53_i0\",   filter_NA = FALSE )"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/diagnosis_process_icd.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Process UKB ICD data for survival analysis — diagnosis_process_icd","text":"data data.frame containing UKB baseline, censoring, ICD code date columns. icd_code target ICD code prefix character vector prefixes (e.g., \"M10\" c(\"E10\", \"E11\")). icd ICD version, 10 9. censored Censoring date (\"YYYY-MM-DD\"). icd_rank Rank diagnosis occurrence consider (1 = first occurrence, 2 = second occurrence, etc.). baseline_date Baseline date column name (default \"p53_i0\"). filter_NA Logical, whether filter NA row. Default FALSE (Suitable comorbidity check).","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/diagnosis_process_icd.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Process UKB ICD data for survival analysis — diagnosis_process_icd","text":"data.frame eid, icd_code_status, icd_code_time.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/diagnosis_process_icd.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Process UKB ICD data for survival analysis — diagnosis_process_icd","text":"","code":"df_example <- data.frame(   eid = 1:5,   p53_i0 = as.Date(c(\"2006-01-01\", \"2007-06-01\", \"2005-03-15\", \"2004-10-30\", \"2008-05-10\")),  # baseline   p191 = as.Date(c(\"2020-01-01\", \"2019-12-31\", \"2021-06-30\", \"2022-07-01\", \"2023-09-10\")),    # last follow-up   p40000_i0 = as.Date(c(NA, NA, NA, \"2021-06-01\", NA)),                                       # death date (field 0)   p40000_i1 = as.Date(c(NA, NA, NA, NA, NA)),                                                 # death date (field 1)   p41270 = c(\"D261|E113|M102\", \"E113|M101\", NA, \"D261|M102|M103\", \"E113|M101|D261\"),          # ICD10 codes   p41280_a0 = as.Date(c(\"2010-05-01\", \"2011-07-20\", NA, \"2015-03-01\", \"2017-07-05\")),         # 1st diagnosis date   p41280_a1 = as.Date(c(\"2012-03-10\", \"2014-09-01\", NA, \"2016-06-01\", \"2018-08-10\")),         # 2nd diagnosis date   p41280_a2 = as.Date(c(\"2015-08-15\", NA, NA, \"2015-09-10\", NA)),                             # 3rd diagnosis date   p41280_a3 = as.Date(c(NA, NA, NA, NA, NA))                                                  # Additional diagnosis field for testing )  # Prefix matching: D261 matches only D261 (icd_rank = 1) diagnosis_process_icd(df_example, icd_code = \"D261\", icd = 10, icd_rank = 1) #> ℹ [15:27:59] diagnosis_process_icd: processing ICD10 [D261] using [2025-01-01] as censored date. #> ℹ [15:27:59] diagnosis_process_icd: converting date columns to <Date>. #> ℹ [15:27:59] diagnosis_process_icd: combining death dates. #> ℹ [15:27:59] diagnosis_process_icd: matching ICD10 pattern [^(D261)]. #> ℹ [15:28:00] diagnosis_process_icd: calculating survival time and status. #> ✔ [15:28:00] diagnosis_process_icd: created [D261_status], [D261_time] - ALL DONE. #>   eid D261_status D261_time #> 1   1           1  4.331507 #> 2   2           0 12.591781 #> 3   3           0 16.304110 #> 4   4           1 10.339726 #> 5   5           0 15.345205  # Prefix matching: M10 matches M101 / M102 (icd_rank = 1) diagnosis_process_icd(df_example, icd_code = \"M10\", icd = 10, icd_rank = 1) #> ℹ [15:28:00] diagnosis_process_icd: processing ICD10 [M10] using [2025-01-01] as censored date. #> ℹ [15:28:00] diagnosis_process_icd: converting date columns to <Date>. #> ℹ [15:28:00] diagnosis_process_icd: combining death dates. #> ℹ [15:28:00] diagnosis_process_icd: matching ICD10 pattern [^(M10)]. #> ℹ [15:28:00] diagnosis_process_icd: calculating survival time and status. #> ✔ [15:28:00] diagnosis_process_icd: created [M10_status], [M10_time] - ALL DONE. #>   eid M10_status  M10_time #> 1   1          1  9.624658 #> 2   2          1  7.257534 #> 3   3          0 16.304110 #> 4   4          1 10.868493 #> 5   5          1 10.257534  # Prefix matching: E113 matches E113 only (icd_rank = 1) diagnosis_process_icd(df_example, icd_code = \"E113\", icd = 10, icd_rank = 1) #> ℹ [15:28:00] diagnosis_process_icd: processing ICD10 [E113] using [2025-01-01] as censored date. #> ℹ [15:28:00] diagnosis_process_icd: converting date columns to <Date>. #> ℹ [15:28:00] diagnosis_process_icd: combining death dates. #> ℹ [15:28:00] diagnosis_process_icd: matching ICD10 pattern [^(E113)]. #> ℹ [15:28:00] diagnosis_process_icd: calculating survival time and status. #> ✔ [15:28:00] diagnosis_process_icd: created [E113_status], [E113_time] - ALL DONE. #>   eid E113_status E113_time #> 1   1           1  6.191781 #> 2   2           1  4.136986 #> 3   3           0 16.304110 #> 4   4           0 16.597260 #> 5   5           1  9.158904  # Prefix matching: M10 matches M101 / M102 (icd_rank = 2) diagnosis_process_icd(df_example, icd_code = \"M10\", icd = 10, icd_rank = 2) #> ℹ [15:28:00] diagnosis_process_icd: processing ICD10 [M10] using [2025-01-01] as censored date. #> ℹ [15:28:00] diagnosis_process_icd: converting date columns to <Date>. #> ℹ [15:28:00] diagnosis_process_icd: combining death dates. #> ℹ [15:28:00] diagnosis_process_icd: matching ICD10 pattern [^(M10)]. #> ℹ [15:28:00] diagnosis_process_icd: calculating survival time and status. #> ✔ [15:28:00] diagnosis_process_icd: created [M10_status], [M10_time] - ALL DONE. #>   eid M10_status M10_time #> 1   1          0 14.00822 #> 2   2          0 12.59178 #> 3   3          0 16.30411 #> 4   4          1 11.59452 #> 5   5          0 15.34521  # Multiple ICD codes: c(\"M10\", \"E113\") - takes global earliest date among all matches diagnosis_process_icd(df_example, icd_code = c(\"M10\", \"E113\"), icd = 10, icd_rank = 1) #> ℹ [15:28:00] diagnosis_process_icd: processing ICD10 [M10 and E113] using [2025-01-01] as censored date. #> ℹ [15:28:00] diagnosis_process_icd: converting date columns to <Date>. #> ℹ [15:28:00] diagnosis_process_icd: combining death dates. #> ℹ [15:28:00] diagnosis_process_icd: matching ICD10 pattern [^(M10|E113)]. #> ℹ [15:28:00] diagnosis_process_icd: calculating survival time and status. #> ✔ [15:28:00] diagnosis_process_icd: created [M10_E113_status], [M10_E113_time] - ALL DONE. #>   eid M10_E113_status M10_E113_time #> 1   1               1      6.191781 #> 2   2               1      4.136986 #> 3   3               0     16.304110 #> 4   4               1     10.868493 #> 5   5               1      9.158904 # Output columns: M10_E113_status, M10_E113_time"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/diagnosis_process_icd_multi.html","id":null,"dir":"Reference","previous_headings":"","what":"Process multiple ICD definitions in bulk — diagnosis_process_icd_multi","title":"Process multiple ICD definitions in bulk — diagnosis_process_icd_multi","text":"Apply diagnosis_process_icd() list table ICD code sets return one status/time pair per diagnosis.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/diagnosis_process_icd_multi.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Process multiple ICD definitions in bulk — diagnosis_process_icd_multi","text":"","code":"diagnosis_process_icd_multi(   data,   icd_map,   icd = 10,   censored = \"2025-01-01\",   icd_rank = 1,   baseline_date = \"p53_i0\" )"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/diagnosis_process_icd_multi.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Process multiple ICD definitions in bulk — diagnosis_process_icd_multi","text":"data data.frame containing UKB baseline, censoring, ICD code date columns. icd_map named list (diagnosis -> vector ICD codes) data.frame. data.frame: first column diagnosis name; remaining columns single \"codes\" column contain ICD codes (comma/space separated one per cell). icd ICD version, 10 9. censored Censoring date (\"YYYY-MM-DD\"). icd_rank Rank diagnosis occurrence consider (1 = first occurrence). baseline_date Baseline date column name (default \"p53_i0\").","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/diagnosis_process_icd_multi.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Process multiple ICD definitions in bulk — diagnosis_process_icd_multi","text":"data.frame eid diagnosis_status/diagnosis_time columns.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/dx_extract.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract UKB data using DNAnexus Table Exporter — dx_extract","title":"Extract UKB data using DNAnexus Table Exporter — dx_extract","text":"function takes file containing UKB field IDs runs Table Exporter app DNAnexus RAP extract data. output saved data_files/ RAP project (specified project). Reference: https://github.com/UK-Biobank/UKB-RAP-Notebooks-Access/blob/main/RStudio/A110_Export_participant_data.Rmd","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/dx_extract.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract UKB data using DNAnexus Table Exporter — dx_extract","text":"","code":"dx_extract(   field_id = NULL,   category_id = NULL,   output_prefix = NULL,   title_pattern_to_keep = NULL,   title_pattern_to_exclude = NULL,   expand = TRUE,   project = NULL,   dataset = NULL,   entity = \"participant\",   coding_option = \"RAW\",   output_format = \"CSV\",   header_style = \"FIELD-NAME\",   instance_type = \"mem1_ssd1_v2_x4\",   dry_run = FALSE )"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/dx_extract.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract UKB data using DNAnexus Table Exporter — dx_extract","text":"field_id Path file vector Field IDs (e.g., c(\"p31\", \"41270\")). category_id Path file vector numeric Category IDs (e.g., 1712, c(1712, 100)). Category IDs must integers correspond UKB data categories hierarchy schema. output_prefix Output file prefix. NULL, auto-generated based fields/categories. title_pattern_to_keep Optional regex keep category-expanded fields title (case-insensitive). applies category_id provided. title_pattern_to_exclude Optional regex drop category-expanded fields title (case-insensitive). Applied title_pattern_to_keep. expand Logical. TRUE (default), validates expands field IDs (e.g. 21003) instances/arrays present dataset (e.g. p21003_i0, p21003_i1) using official dataset dictionary verification strategy. project Optional target project ID (e.g., \"project-XXX\"). dataset includes project prefix, must match project (otherwise error). dataset name project provided, dataset resolved within project. list accessible projects: projects <- dx_run(c(\"find\", \"projects\", \"--brief\"), intern = TRUE) projects <- dx_run(c(\"find\", \"projects\"), intern = TRUE) # details dataset dataset ID/name extract (e.g., \"app12345_20240101.dataset\" \"project-Gk2...:record-Fp3...\"). Defaults latest dataset project NULL. list datasets across projects: datasets <- dx_run(c(\"find\", \"data\", \"--name\", \"*.dataset\", \"--brief\", \"---projects\"), intern = TRUE) entity Entity type. Options: \"participant\" (default): Main phenotype/covariate data. \"hesin\": Hospital episode statistics. \"death\": Death registry records. \"image\": Imaging metadata. coding_option encode categorical values. Options: \"RAW\" (default): Return raw numeric codes (e.g., 1, 2, 3). \"REPLACE\": Replace codes human-readable labels (e.g., \"Male\", \"Female\"). output_format Output file format. Options: \"CSV\" (default): Comma-separated values. \"TSV\": Tab-separated values. header_style Column header naming style. Options: \"FIELD-NAME\" (default): Use field names like p21003_i0. \"FIELD-TITLE\": Use descriptive titles like \"Age attended assessment centre\". \"UKB-FORMAT\": Use raw UKB field IDs like 21003-0.0. instance_type DNAnexus instance type job. Default: \"mem1_ssd1_v2_x4\". large extracts, \"mem1_hdd1_v2_x8\" recommended. dry_run Logical. TRUE, skips Table Exporter job submission. steps (dataset detection, dictionary validation, file upload) still run. Useful testing command generation without launching jobs. Default FALSE.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/dx_extract.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract UKB data using DNAnexus Table Exporter — dx_extract","text":"list containing job ID expected output path (invisibly).","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/dx_extract.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extract UKB data using DNAnexus Table Exporter — dx_extract","text":"","code":"if (FALSE) { # \\dontrun{ dx_login() # Make sure you have logged in to DNAnexus dx_status() # Check the status of your login  # 1. Basic extraction (extracts covariates defined in fields.txt) dx_extract(\"tmp/fields.txt\", output_prefix = \"ukb_data\", dry_run = TRUE)  # 2. Extraction using vectors (Field & Category) dx_extract(field_id = c(\"p53\", \"p191\", \"p40000\", # basic demographics                         \"p41270\", \"p41271\", \"p41280\", \"p41281\"), # ICD codes            category_id = 1712, # First occurrences            title_pattern_to_exclude = \"^Source\",            output_prefix = \"diagnosis20260205\")  # 3. Just Category (numeric ID or vector of IDs) dx_extract(category_id = 1712)  # Extract all fields in category 1712 dx_extract(category_id = c(1712, 100))  # Multiple categories  # 3b. First occurrences (FO) title filters # Keep only titles starting with \"Date\" dx_extract(category_id = 1712, title_pattern_to_keep = \"^Date\") # Exclude titles starting with \"Source\" dx_extract(category_id = 1712, title_pattern_to_exclude = \"^Source\")  # 4. Extract with human-readable labels and descriptive headers dx_extract(\"tmp/fields.txt\",            output_prefix = \"ukb_data_readable\",            coding_option = \"REPLACE\",            header_style = \"FIELD-TITLE\")  # 5a. Explicitly specifying the dataset (Recommended for reproducibility) datasets <- dx_run(c(\"find\", \"data\", \"--name\", \"*.dataset\", \"--brief\"), intern = TRUE) dx_extract(\"tmp/fields.txt\", dataset = datasets[1])  # 5b. Extract in a specified project projects_all <- dx_run(c(\"find\", \"projects\"), intern = TRUE); projects_all projects_all_brief <- dx_run(c(\"find\", \"projects\", \"--brief\"), intern = TRUE); projects_all_brief datasets_all <- dx_run(c(\"find\", \"data\", \"--name\", \"*.dataset\", \"--brief\", \"--all-projects\"), intern = TRUE) dx_extract(field_id = c(\"p53\", \"p191\", \"p40000\", # basic demographics                         \"p41270\", \"p41271\", \"p41280\", \"p41281\"), # ICD codes            category_id = 1712, # First occurrences            title_pattern_to_exclude = \"^Source\",            output_prefix = \"diagnosis20260205\",            project = projects_all_brief[2])  # 6. Dry run mode - Test without actually submitting the job # Useful for debugging and verifying the command before execution result <- dx_extract(   field_id = c(\"p31\", \"p21003\"),   category_id = 1712,   output_prefix = \"test_run\",   dry_run = TRUE ) # Shows all commands that would be executed # Returns: list(job_id = \"job-DRYRUN123456\", output_path = \"...\", dry_run = TRUE) } # }"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/dx_login.html","id":null,"dir":"Reference","previous_headings":"","what":"Log in to DNAnexus — dx_login","title":"Log in to DNAnexus — dx_login","text":"wrapper dx login. supports interactive login (token provided) token-based login.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/dx_login.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Log in to DNAnexus — dx_login","text":"","code":"dx_login(token = NULL)"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/dx_login.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Log in to DNAnexus — dx_login","text":"token Optional. DNAnexus authentication token.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/dx_login.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Log in to DNAnexus — dx_login","text":"None (runs system command).","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/dx_run.html","id":null,"dir":"Reference","previous_headings":"","what":"Robust dx runner — dx_run","title":"Robust dx runner — dx_run","text":"Executes dx CLI commands automatic path detection logging. Supports macOS Homebrew installations dry-run mode testing.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/dx_run.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Robust dx runner — dx_run","text":"","code":"dx_run(   args,   intern = TRUE,   ignore.stderr = FALSE,   dry_run = FALSE,   verbose = TRUE,   ... )"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/dx_run.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Robust dx runner — dx_run","text":"args Character vector dx command arguments (e.g., c(\"describe\", \"file-123\")). intern Logical. TRUE, capture stdout character vector. FALSE, return exit code. ignore.stderr Logical. TRUE, suppress stderr output. dry_run Logical. TRUE, logs command without executing . Returns mock success. verbose Logical. TRUE (default), logs dx command execution. ... Additional arguments passed system2().","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/dx_run.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Robust dx runner — dx_run","text":"intern=TRUE, returns character vector stdout. intern=FALSE, returns exit code. dry_run mode, returns character(0) intern=TRUE, 0L intern=FALSE.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/dx_run.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Robust dx runner — dx_run","text":"","code":"if (FALSE) { # \\dontrun{   # Get current project info   env_info <- dx_run(c(\"env\"), intern = TRUE)    # Extract project ID from environment   # Output format: \"Current workspace\\tproject-XXX\"   workspace_line <- grep(\"Current workspace\\\\t\", env_info, value = TRUE)   project_id <- sub(\".*\\\\t(project-[^\\\\s]+).*\", \"\\\\1\", workspace_line)    # Now use the extracted project ID   result <- dx_run(c(\"describe\", project_id), intern = TRUE)    # Find datasets in current project   datasets <- dx_run(c(\"find\", \"data\", \"--name\", \"*.dataset\", \"--brief\"), intern = TRUE)    # Upload file without capturing output (dry run)   exit_code <- dx_run(c(\"upload\", \"file.txt\", \"--path\", \"/data/\"), intern = FALSE, dry_run = TRUE)    # Test command without execution (dry run)   dx_run(c(\"run\", \"app-table-exporter\", \"-y\"), dry_run = TRUE)    # Ignore stderr for commands that may produce warnings   dx_run(c(\"find\", \"data\", \"--brief\"), ignore.stderr = TRUE) } # }"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/dx_status.html","id":null,"dir":"Reference","previous_headings":"","what":"Check DNAnexus Job Status & Dashboard — dx_status","title":"Check DNAnexus Job Status & Dashboard — dx_status","text":"Checks status specific job displays dashboard recent jobs.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/dx_status.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check DNAnexus Job Status & Dashboard — dx_status","text":"","code":"dx_status(all_projects = TRUE, job_id = NULL, limit = 5)"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/dx_status.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check DNAnexus Job Status & Dashboard — dx_status","text":"all_projects Logical. TRUE, shows jobs projects account (account-wide). Default FALSE (current project). job_id Optional. string containing job ID (e.g., \"job-Gk2...\") list returned dx_extract. provided, all_projects ignored. limit Numeric. Number recent jobs show dashboard (default: 3).","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/dx_status.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check DNAnexus Job Status & Dashboard — dx_status","text":"state job string (job_id provided) data frame recent jobs (job_id NULL), invisibly.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/dx_status.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Check DNAnexus Job Status & Dashboard — dx_status","text":"called without job_id, displays \"htop\"-style dashboard last several jobs.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/dx_status.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Check DNAnexus Job Status & Dashboard — dx_status","text":"","code":"if (FALSE) { # \\dontrun{ # 1. View dashboard of recent jobs in current project dx_status()  # 2. View dashboard for ONLY the current project dx_status(all_projects = FALSE)  # 3. Check status of a specific job dx_status(job_id = \"job-Gk2PzX0Jj1X4Y5Z6\") } # }"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/format_p_value.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper function to format p-values according to common publication standards — format_p_value","title":"Helper function to format p-values according to common publication standards — format_p_value","text":"Helper function format p-values according common publication standards","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/format_p_value.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Helper function to format p-values according to common publication standards — format_p_value","text":"","code":"format_p_value(p_value)"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/format_p_value.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper function to format p-values according to common publication standards — format_p_value","text":"p_value Numeric p-value","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/format_p_value.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Helper function to format p-values according to common publication standards — format_p_value","text":"Formatted p-value string","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/get_max_date.html","id":null,"dir":"Reference","previous_headings":"","what":"Find the max date in given date columns  — get_max_date","title":"Find the max date in given date columns  — get_max_date","text":"Generate icd_code_status icd_code_time UKB ICD records.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/get_max_date.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Find the max date in given date columns  — get_max_date","text":"","code":"get_max_date(df, date_columns)"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/get_max_date.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Find the max date in given date columns  — get_max_date","text":"df data.frame containing UKB statistics date_columns character vector column names patterns select date columns.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/get_max_date.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Find the max date in given date columns  — get_max_date","text":"","code":"ukb_sim <- tibble::tibble(   eid = 1:8,   p53_i0 = as.Date(c(\"2006-01-01\", \"2007-05-15\", \"2008-03-20\", \"2009-07-30\",                      \"2010-11-11\", \"2011-12-25\", \"2005-02-14\", \"2004-09-09\")),   p191 = as.Date(c(\"2020-01-01\", \"2021-06-15\", NA, \"2022-03-20\",                    \"2023-07-30\", \"2024-11-11\", \"2019-12-31\", \"2022-08-08\")),   p40000_i0 = as.Date(c(NA, \"2022-05-05\", \"2023-08-08\", NA, \"2024-09-09\", NA, NA, \"2021-01-01\")),   p40000_i1 = as.Date(c(\"2023-01-01\", NA, NA, \"2024-04-04\", NA, \"2025-12-12\", NA, NA)),    # self-reported first occurrence (example; includes an abnormal placeholder)   p20002_0_0 = as.Date(c(\"2015-01-01\", \"2016-02-02\", \"1900-01-01\", NA, \"2018-03-03\", \"2019-04-04\", \"2020-06-06\", \"1901-01-01\")),    # ICD10 codes (pipe-separated) and corresponding diagnosis dates   p41270 = c(     \"D261|E113|M102\",     \"E113|M101\",     NA,     \"D261|M102|M103\",     \"E113|M101|D261\",     \"M101|M100\",     \"M101\",     \"D261\"   ),   p41280_a0 = as.Date(c(\"2012-05-01\", \"2021-07-20\", NA, \"2015-03-01\", \"2017-07-05\", \"2012-02-02\", \"2013-04-04\", \"2009-09-09\")),   p41280_a1 = as.Date(c(\"2012-03-10\", \"2014-09-01\", NA, \"2016-06-01\", \"2018-08-10\", \"2014-05-05\", NA, NA)),   p41280_a2 = as.Date(c(\"2015-08-15\", NA, NA, \"2015-09-10\", NA, NA, NA, NA)),   p41280_a3 = as.Date(c(NA, NA, NA, NA, NA, NA, NA, NA)) )  get_max_date(ukb_sim, date_columns = c(\"p41280_a*\")) #> [1] \"None date in last 5 years\""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo.impute_na.html","id":null,"dir":"Reference","previous_headings":"","what":"Basic imputation function for missing values — leo.impute_na","title":"Basic imputation function for missing values — leo.impute_na","text":"function provides multiple methods imputing missing values dataset, including mean, median, random forest, KNN, multiple imputation.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo.impute_na.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Basic imputation function for missing values — leo.impute_na","text":"","code":"leo.impute_na(data, method = \"mean\", ...)"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo.impute_na.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Basic imputation function for missing values — leo.impute_na","text":"data data frame containing data missing values method Imputation method: \"mean\", \"median\", \"rf\" (random forest), \"knn\" (K-nearest neighbors), \"mice\" (multiple imputation) ... Additional arguments passed specific imputation function","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo.impute_na.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Basic imputation function for missing values — leo.impute_na","text":"data frame missing values imputed","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo.impute_na.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Basic imputation function for missing values — leo.impute_na","text":"","code":"# Create sample data with missing values set.seed(123) sample_data <- data.frame(   age = c(25, 30, NA, 40, 45),   score = c(80, NA, 90, 85, NA),   group = factor(c(\"A\", \"B\", \"A\", NA, \"B\")) )  # Mean imputation leo.impute_na(sample_data, method = \"mean\") #> ℹ [15:28:01] Missing values per column (count/percentage): #> ℹ [15:28:01]   age: 1/5 (20%) #> ℹ [15:28:01]   score: 2/5 (40%) #> ℹ [15:28:01]   group: 1/5 (20%) #> ! [15:28:01] Remaining missing values after imputation: #> ! [15:28:01]   group: 1 #>   age score group #> 1  25    80     A #> 2  30    85     B #> 3  35    90     A #> 4  40    85  <NA> #> 5  45    85     B  # Random forest imputation leo.impute_na(sample_data, method = \"rf\") #> ℹ [15:28:01] Missing values per column (count/percentage): #> ℹ [15:28:01]   age: 1/5 (20%) #> ℹ [15:28:01]   score: 2/5 (40%) #> ℹ [15:28:01]   group: 1/5 (20%) #> Missing value imputation by random forests #>  #> Variables to impute:\t\tage, group, score #> Variables used to impute:\tage, score, group #>  #> iter 1  #>    |                                                                               |                                                                      |   0%   |                                                                               |=======================                                               |  33%   |                                                                               |===============================================                       |  67%   |                                                                               |======================================================================| 100% #> ℹ [15:28:01] Imputation completed using rf method #>   age score group #> 1  25 80.00     A #> 2  30 84.91     B #> 3  40 90.00     A #> 4  40 85.00     A #> 5  45 84.91     B"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo.table1.help.html","id":null,"dir":"Reference","previous_headings":"","what":"Table 1 Help — leo.table1.help","title":"Table 1 Help — leo.table1.help","text":"function provides help use leo.table1 functions basic background knowledge.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo.table1.help.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Table 1 Help — leo.table1.help","text":"","code":"leo.table1.help()"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo.table1.help.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Table 1 Help — leo.table1.help","text":"encounter warning unknown RStudio theme using cli functions, can suppress setting:   option set R session avoid warning.","code":"options(cli.ignore_unknown_rstudio_theme = TRUE)"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo.table1.save.html","id":null,"dir":"Reference","previous_headings":"","what":"Save Table 1 to Word or CSV — leo.table1.save","title":"Save Table 1 to Word or CSV — leo.table1.save","text":"function saves Table 1 output Word CSV file, depending file extension.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo.table1.save.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Save Table 1 to Word or CSV — leo.table1.save","text":"","code":"leo.table1.save(table, filename)"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo.table1.save.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Save Table 1 to Word or CSV — leo.table1.save","text":"table table object (e.g., CreateTableOne). filename character string indicating output file name (e.g., \"table1.csv\" \"table1.docx\").","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo.table1.step1.html","id":null,"dir":"Reference","previous_headings":"","what":"Step 1: Check Normality for Variables — leo.table1.step1","title":"Step 1: Check Normality for Variables — leo.table1.step1","text":"function checks normality variable dataset returns summary.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo.table1.step1.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Step 1: Check Normality for Variables — leo.table1.step1","text":"","code":"leo.table1.step1(df, id_to_exclude = c(\"eid\", \"iri_time\"), num_var = NULL)"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo.table1.step1.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Step 1: Check Normality for Variables — leo.table1.step1","text":"df data frame tibble containing variables tested. num_var user-provided numeric variables test normality. Default NULL. id character string specifying column name patient ID. Default \"eid\".","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo.table1.step1.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Step 1: Check Normality for Variables — leo.table1.step1","text":"data frame variables, p-values normality test, normality status.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo.table1.step1.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Step 1: Check Normality for Variables — leo.table1.step1","text":"","code":"# leo.table1.step1(t1d_cohort, id_to_exclude = c(\"eid\", \"iri_time\"), num_var = c(\"age\", \"tdi\", \"score_diet\", \"TyG\"))"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo.table1.step2.html","id":null,"dir":"Reference","previous_headings":"","what":"Step 2: Generate Table 1 for Cohort Study — leo.table1.step2","title":"Step 2: Generate Table 1 for Cohort Study — leo.table1.step2","text":"function generates descriptive table clinical cohort studies, options stratify group perform group comparisons.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo.table1.step2.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Step 2: Generate Table 1 for Cohort Study — leo.table1.step2","text":"","code":"leo.table1.step2(   df,   var_all,   var_cat,   var_non,   strata = NULL,   var_exact = NULL,   compare_test = F,   includeNA = F,   showAllLevels = F,   verbose = T )"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo.table1.step2.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Step 2: Generate Table 1 for Cohort Study — leo.table1.step2","text":"df data frame tibble containing clinical variables. var_all Vector. var included table 1 var_cat Vector. Categorical variables. var_non Vector. Non-normal continuous variables. (Process print) strata Character, column name stratify . Use \"none\" disable stratification. var_exact Vector. var_cat needs fisher exact test. (Process print) compare_test Logical, TRUE, performs group comparison (works strata \"none\"). includeNA Logical, TRUE, includes NAs level categorical variables. showAllLevels Logical, TRUE, levels factor variables shown. verbose Logical, TRUE, prints table.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo.table1.step2.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Step 2: Generate Table 1 for Cohort Study — leo.table1.step2","text":"Printed table1","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo.ukb-package.html","id":null,"dir":"Reference","previous_headings":"","what":"leo.ukb: LEO package for UK Biobank database analysis — leo.ukb-package","title":"leo.ukb: LEO package for UK Biobank database analysis — leo.ukb-package","text":"package used analyze UK Biobank data. may extended clincial studies.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo.ukb-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"leo.ukb: LEO package for UK Biobank database analysis — leo.ukb-package","text":"Maintainer: Ao Lu luao@stu.cqmu.edu.cn (ORCID)","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_BMI.html","id":null,"dir":"Reference","previous_headings":"","what":"Recode BMI into categories (Underweight/Normal weight/Overweight/Obese) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=21001 — leo_BMI","title":"Recode BMI into categories (Underweight/Normal weight/Overweight/Obese) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=21001 — leo_BMI","text":"Recode BMI categories (Underweight/Normal weight/Overweight/Obese) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=21001","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_BMI.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Recode BMI into categories (Underweight/Normal weight/Overweight/Obese) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=21001 — leo_BMI","text":"","code":"leo_BMI(BMI, ...)"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_BMI.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Recode BMI into categories (Underweight/Normal weight/Overweight/Obese) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=21001 — leo_BMI","text":"BMI Numeric/character vector BMI (kg/m^2) p21001.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_BMI.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Recode BMI into categories (Underweight/Normal weight/Overweight/Obese) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=21001 — leo_BMI","text":"Factor levels \"Underweight\", \"Normal weight\", \"Overweight\", \"Obese\"; NA invalid missing.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_LGI.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Low-Grade Inflammation Score (LGI / INFLA-score) — leo_LGI","title":"Calculate Low-Grade Inflammation Score (LGI / INFLA-score) — leo_LGI","text":"function calculates low-grade inflammation score (INFLA-score) using four biomarkers: high-sensitivity C-reactive protein (CRP), white blood cell (WBC) count, platelet (PLT) count, neutrophil--lymphocyte ratio (NLR = neutrophil / lymphocyte).","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_LGI.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Low-Grade Inflammation Score (LGI / INFLA-score) — leo_LGI","text":"","code":"leo_LGI(crp, wbc, plt, neutrophil, lymphocyte, ...)"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_LGI.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Low-Grade Inflammation Score (LGI / INFLA-score) — leo_LGI","text":"crp Numeric vector hs-CRP values (mg/L). wbc Numeric vector white blood cell counts (×10^9/L). plt Numeric vector platelet counts (×10^9/L). neutrophil Numeric vector neutrophil counts (×10^9/L). lymphocyte Numeric vector lymphocyte counts (×10^9/L). ... Reserved future use. x Numeric vector biomarker values.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_LGI.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Low-Grade Inflammation Score (LGI / INFLA-score) — leo_LGI","text":"Numeric vector LGI / INFLA scores (-16 +16). Integer vector -4, 4; NA input NA.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_LGI.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Calculate Low-Grade Inflammation Score (LGI / INFLA-score) — leo_LGI","text":"biomarker, within-sample deciles (1–10) mapped scores: deciles 1–4  -> -4, -3, -2, -1 deciles 5–6  ->  0,  0 deciles 7–10 ->  1,  2,  3,  4 LGI / INFLA-score sum four component scores ranges -16 +16. Higher values indicate higher chronic low-grade inflammation.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_LGI.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Calculate Low-Grade Inflammation Score (LGI / INFLA-score) — leo_LGI","text":"Suggested UK Biobank fields (instance 0): CRP:        Field 30710  (e.g. p30710_i0) WBC:        Field 30000  (e.g. p30000_i0) Platelets:  Field 30080  (e.g. p30080_i0) Neutrophil: Field 30140  (e.g. p30140_i0) Lymphocyte: Field 30120  (e.g. p30120_i0) fourth component uses NLR instead GrL, taking advantage differential white cell counts UK Biobank. Internal helper: score biomarker deciles LGI","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_TyG.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Triglyceride-Glucose Index (TyG) — leo_TyG","title":"Calculate Triglyceride-Glucose Index (TyG) — leo_TyG","text":"function calculates Triglyceride-Glucose Index (TyG) using triglyceride glucose values.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_TyG.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Triglyceride-Glucose Index (TyG) — leo_TyG","text":"","code":"leo_TyG(triglycerides, glucose, ...)"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_TyG.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Triglyceride-Glucose Index (TyG) — leo_TyG","text":"triglycerides numeric vector triglyceride values (mmol/L). glucose numeric vector glucose values (mmol/L).","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_TyG.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Triglyceride-Glucose Index (TyG) — leo_TyG","text":"numeric vector TyG index values.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_TyG.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Calculate Triglyceride-Glucose Index (TyG) — leo_TyG","text":"formula TyG : $$TyG = \\log \\left( \\frac{triglycerides \\times glucose}{2} \\right)$$ Triglycerides glucose converted mmol/L mg/dL using factors: Triglycerides: $$mg/dL = mmol/L \\times 88.5704$$ Glucose: $$mg/dL = mmol/L \\times 18.0168$$ – UKB, triglycerides (Field ID: 30870) glucose (Field ID: 30740) measured mmol/L.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_TyG.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Calculate Triglyceride-Glucose Index (TyG) — leo_TyG","text":"https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3662289/ (Cardiovasc Diabetol, 2013)","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_age.html","id":null,"dir":"Reference","previous_headings":"","what":"Recode age (years) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=21003 — leo_age","title":"Recode age (years) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=21003 — leo_age","text":"Recode age (years) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=21003","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_age.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Recode age (years) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=21003 — leo_age","text":"","code":"leo_age(age, ...)"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_age.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Recode age (years) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=21003 — leo_age","text":"age Numeric/character vector age (years) p21003.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_age.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Recode age (years) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=21003 — leo_age","text":"Numeric vector age years.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_career.html","id":null,"dir":"Reference","previous_headings":"","what":"Recode employment status — leo_career","title":"Recode employment status — leo_career","text":"Recode employment status paid vs -paid employment https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=6142","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_career.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Recode employment status — leo_career","text":"","code":"leo_career(p6142_i0, ...)"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_career.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Recode employment status — leo_career","text":"p6142_i0 Current employment status (UKB 6142, instance 0). Values: 1 = paid employment self-employed 2 = Retired 3 = Looking home /family 4 = Unable work sickness disability 5 = Unemployed 6 = unpaid voluntary work 7 = Full part-time student -7 = None -3 = Prefer answer ... Reserved future use.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_career.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Recode employment status — leo_career","text":"Factor categories \"Paid employment\" \"paid employment\"; NA special codes.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_diet_us.html","id":null,"dir":"Reference","previous_headings":"","what":"healthy diet score by U.S. Dietary Guidelines — leo_diet_us","title":"healthy diet score by U.S. Dietary Guidelines — leo_diet_us","text":"Calculate 0–7 healthy diet score using seven components (vegetables, fruit, fish, whole grains, refined grains, processed meat, unprocessed meat) following U.S. Dietary Guidelines targets. component meeting intake target contributes 1 point; higher scores indicate healthier patterns.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_diet_us.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"healthy diet score by U.S. Dietary Guidelines — leo_diet_us","text":"","code":"leo_diet_us(   fresh_fruit,   dried_fruit,   cooked_veg,   salad_veg,   oily_fish,   non_oily_fish,   bread_intake,   bread_type,   cereal_intake,   cereal_type,   processed_meat,   age_last_meat,   poultry,   beef,   lamb,   pork,   ... )"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_diet_us.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"healthy diet score by U.S. Dietary Guidelines — leo_diet_us","text":"fresh_fruit Fresh fruit pieces per day. dried_fruit Dried fruit pieces per day (5 pieces = 1 serving). cooked_veg Cooked vegetables tablespoons per day (3 tbsp = 1 serving). salad_veg Salad/raw vegetables tablespoons per day (3 tbsp = 1 serving). oily_fish Oily fish frequency code (p1329_i0, 0–5 per Data-Coding 100377). non_oily_fish Non-oily fish frequency code (p1339_i0, 0–5 per Data-Coding 100377). bread_intake Bread slices per week (p1438_i0); -10 treated 0/week (less ). bread_type Bread type code (p1448_i0): 1=White, 2=Brown, 3=Wholemeal, 4=. cereal_intake Cereal bowls per week (p1458_i0); -10 treated 0/week. cereal_type Cereal type code (p1468_i0): 1=Bran, 2=Biscuit, 3=Oat, 4=Muesli, 5=. processed_meat Processed meat frequency code (p1349_i0, 0–5 per Data-Coding 100377). age_last_meat Age last ate meat (p3680_i0); 0 = never ate meat. poultry Poultry frequency code (p1359_i0, 0–5 per Data-Coding 100377). beef Beef frequency code (p1369_i0, 0–5 per Data-Coding 100377). lamb Lamb/mutton frequency code (p1379_i0, 0–5 per Data-Coding 100377). pork Pork frequency code (p1389_i0, 0–5 per Data-Coding 100377). ... Reserved future use.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_diet_us.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"healthy diet score by U.S. Dietary Guidelines — leo_diet_us","text":"Integer vector 0,7; NA component evaluated row.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_diet_us.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"healthy diet score by U.S. Dietary Guidelines — leo_diet_us","text":"Field expectations (UKB instance 0): Fruits: p1309_i0 (fresh pieces/day), p1319_i0 (dried pieces/day; 5 pieces = 1 serving) Vegetables: p1289_i0 (cooked tablespoons/day), p1299_i0 (salad tablespoons/day; 3 tbsp = 1 serving) Fish: p1329_i0 (oily fish frequency code), p1339_i0 (non-oily fish frequency code) Bread: p1438_i0 (slices/week, -10 = \"less \"), p1448_i0 (type: 1=White, 2=Brown, 3=Wholemeal, 4=) Cereal: p1458_i0 (bowls/week, -10 = \"less \"), p1468_i0 (type: 1=Bran, 2=Biscuit, 3=Oat, 4=Muesli, 5=) Processed meat: p1349_i0 (frequency code 0–5, per Data-Coding 100377); p3680_i0 == 0 implies never ate meat Unprocessed meat: p1359_i0 (poultry), p1369_i0 (beef), p1379_i0 (lamb), p1389_i0 (pork) — frequency codes 0–5 frequency fields (100377) encode: 0=Never, 1=<1/wk, 2=1/wk, 3=2–4/wk, 4=5–6/wk, 5=Daily. meet component thresholds, frequency codes must converted weekly servings (e.g., code 2 → 1/wk, code 3 → 3/wk midpoint, code 5 → 7/wk). Whole grains: bread_type==3 (wholemeal) + cereal_type (1,3,4) (bran/oat/muesli) Refined grains: bread_type (1,2,4) (white/brown/) + cereal_type (2,5) (biscuit/)","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_drinking_consumption.html","id":null,"dir":"Reference","previous_headings":"","what":"Recode drinking consumption — leo_drinking_consumption","title":"Recode drinking consumption — leo_drinking_consumption","text":"sophisticated indictor shoing one exccessively drink, cobining thinking: red_wine white wine, beer, spirits, fortified wine Numeric/character vector, usually p20117.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_drinking_consumption.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Recode drinking consumption — leo_drinking_consumption","text":"","code":"leo_drinking_consumption(...)"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_drinking_consumption.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Recode drinking consumption — leo_drinking_consumption","text":"Integer vector (0/1/2; NA negative/special codes others).","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_drinking_status.html","id":null,"dir":"Reference","previous_headings":"","what":"Recode drinking status (Never/Previous/Current) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=20117 — leo_drinking_status","title":"Recode drinking status (Never/Previous/Current) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=20117 — leo_drinking_status","text":"Recode drinking status (Never/Previous/Current) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=20117","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_drinking_status.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Recode drinking status (Never/Previous/Current) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=20117 — leo_drinking_status","text":"","code":"leo_drinking_status(drinking_status, ...)"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_drinking_status.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Recode drinking status (Never/Previous/Current) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=20117 — leo_drinking_status","text":"drinking_status Numeric/character vector, usually p20117.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_drinking_status.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Recode drinking status (Never/Previous/Current) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=20117 — leo_drinking_status","text":"Factor levels \"Never\", \"Previous\", \"Current\"; NA negative/special codes others.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_eGDR.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Estimated Glucose Disposal Rate (eGDR) — leo_eGDR","title":"Calculate Estimated Glucose Disposal Rate (eGDR) — leo_eGDR","text":"function calculates eGDR using waist circumference, hypertension status, HbA1c values. works element-wise vectors HbA1c, waist, hypertension.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_eGDR.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Estimated Glucose Disposal Rate (eGDR) — leo_eGDR","text":"","code":"leo_eGDR(hba1c, waist, hypertension, ...)"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_eGDR.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Estimated Glucose Disposal Rate (eGDR) — leo_eGDR","text":"hba1c numeric vector HbA1c values (mmol/mol). waist numeric vector waist circumferences (cm). hypertension numeric vector hypertension status (1 yes, 0 ).","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_eGDR.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Estimated Glucose Disposal Rate (eGDR) — leo_eGDR","text":"numeric vector eGDR values.","code":""},{"path":[]},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_eGDR.html","id":"egdr-estimated-glucose-disposal-rate-","dir":"Reference","previous_headings":"","what":"eGDR: Estimated Glucose Disposal Rate:","title":"Calculate Estimated Glucose Disposal Rate (eGDR) — leo_eGDR","text":"UKB, HbA1c measured mmol/mol (IFCC), needs converted % (NGSP). HbA1c (mmol/mol) (Field ID: 30750) Conversion formula: NGSP (%) = 0.09148 * IFCC + 2.152 Ref Waist circumference (Field ID: 48) hypertension need extract icd10 first occurrence records first.","code":"# eGDR is calculated using the following formula: eGDR = 21.158 + (-0.09 * waist circumference [cm]) + (−3.407 * hypertension [yes=1/no=0]) + (−0.551 * HbA1c (%))"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_eGDR.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Calculate Estimated Glucose Disposal Rate (eGDR) — leo_eGDR","text":"https://diabetesjournals.org/care/article/36/8/2280/32950/Use---Estimated-Glucose-Disposal-Rate--(Diabetes Care, 2013 July) https://pmc.ncbi.nlm.nih.gov/articles/PMC11439291/#Sec2 (Cardiovasc Diabetol, 2024 Sep)","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_education.html","id":null,"dir":"Reference","previous_headings":"","what":"Recode UKB qualifications into 3 categories — leo_education","title":"Recode UKB qualifications into 3 categories — leo_education","text":"Recode UKB field 6138 (Qualifications; multiple selections separated \"|\") Degree / degree / Unknown.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_education.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Recode UKB qualifications into 3 categories — leo_education","text":"","code":"leo_education(p6138_i0, ...)"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_education.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Recode UKB qualifications into 3 categories — leo_education","text":"p6138_i0 UKB 6138 qualifications string (https://biobank.ndph.ox.ac.uk/ukb/field.cgi?id=6138). ... Reserved future use.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_education.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Recode UKB qualifications into 3 categories — leo_education","text":"Character vector values: \"Degree\", \"degree\", \"Unknown\".","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_ethnicity.html","id":null,"dir":"Reference","previous_headings":"","what":"Recode ethnicity to White vs non-White https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=21000 — leo_ethnicity","title":"Recode ethnicity to White vs non-White https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=21000 — leo_ethnicity","text":"Recode ethnicity White vs non-White https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=21000","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_ethnicity.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Recode ethnicity to White vs non-White https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=21000 — leo_ethnicity","text":"","code":"leo_ethnicity(ethnicity, ...)"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_ethnicity.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Recode ethnicity to White vs non-White https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=21000 — leo_ethnicity","text":"ethnicity Numeric/character vector, usually p21000.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_ethnicity.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Recode ethnicity to White vs non-White https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=21000 — leo_ethnicity","text":"Factor levels \"White\", \"Non-White\"; NA -1/-3/missing.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_ethnicity_finer.html","id":null,"dir":"Reference","previous_headings":"","what":"Recode ethnicity into finer categories (top-level 1–6) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=21000 — leo_ethnicity_finer","title":"Recode ethnicity into finer categories (top-level 1–6) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=21000 — leo_ethnicity_finer","text":"Recode ethnicity finer categories (top-level 1–6) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=21000","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_ethnicity_finer.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Recode ethnicity into finer categories (top-level 1–6) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=21000 — leo_ethnicity_finer","text":"","code":"leo_ethnicity_finer(ethnicity, ...)"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_ethnicity_finer.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Recode ethnicity into finer categories (top-level 1–6) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=21000 — leo_ethnicity_finer","text":"ethnicity Numeric/character vector, usually p21000.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_ethnicity_finer.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Recode ethnicity into finer categories (top-level 1–6) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=21000 — leo_ethnicity_finer","text":"Factor levels: \"White\", \"Mixed\", \"Asian Asian British\", \"Black Black British\", \"Chinese\", \"ethnic group\"; NA -1/-3/missing/unexpected codes.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_gender.html","id":null,"dir":"Reference","previous_headings":"","what":"Recode sex (Male/Female) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=31 — leo_gender","title":"Recode sex (Male/Female) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=31 — leo_gender","text":"Recode sex (Male/Female) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=31","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_gender.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Recode sex (Male/Female) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=31 — leo_gender","text":"","code":"leo_gender(gender, ...)"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_gender.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Recode sex (Male/Female) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=31 — leo_gender","text":"gender Numeric/character vector, usually p31.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_gender.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Recode sex (Male/Female) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=31 — leo_gender","text":"Factor levels \"Female\", \"Male\"; NA negative/special codes.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_hba1c.html","id":null,"dir":"Reference","previous_headings":"","what":"Recode HbA1c (IFCC, mmol/mol) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=30750 — leo_hba1c","title":"Recode HbA1c (IFCC, mmol/mol) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=30750 — leo_hba1c","text":"UK Biobank HbA1c stored mmol/mol (IFCC). function performs: numeric coercion, recoding UKB special codes (-3/-1) NA, dropping non-positive values NA (conservative guard).","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_hba1c.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Recode HbA1c (IFCC, mmol/mol) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=30750 — leo_hba1c","text":"","code":"leo_hba1c(hba1c, ...)"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_hba1c.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Recode HbA1c (IFCC, mmol/mol) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=30750 — leo_hba1c","text":"hba1c Numeric/character vector HbA1c values (mmol/mol, IFCC), usually p30750. ... Reserved future use.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_hba1c.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Recode HbA1c (IFCC, mmol/mol) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=30750 — leo_hba1c","text":"Numeric vector HbA1c mmol/mol (IFCC), special codes NA.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_hba1c_percent.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert HbA1c from IFCC (mmol/mol) to NGSP (%) https://ngsp.org/ifcc.asp — leo_hba1c_percent","title":"Convert HbA1c from IFCC (mmol/mol) to NGSP (%) https://ngsp.org/ifcc.asp — leo_hba1c_percent","text":"Conversion formula: $$NGSP(\\%) = 0.09148 \\times IFCC(mmol/mol) + 2.152$$","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_hba1c_percent.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert HbA1c from IFCC (mmol/mol) to NGSP (%) https://ngsp.org/ifcc.asp — leo_hba1c_percent","text":"","code":"leo_hba1c_percent(hba1c, ...)"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_hba1c_percent.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert HbA1c from IFCC (mmol/mol) to NGSP (%) https://ngsp.org/ifcc.asp — leo_hba1c_percent","text":"hba1c Numeric/character vector HbA1c values (mmol/mol, IFCC), usually p30750. ... Reserved future use.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_hba1c_percent.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert HbA1c from IFCC (mmol/mol) to NGSP (%) https://ngsp.org/ifcc.asp — leo_hba1c_percent","text":"Numeric vector HbA1c % (NGSP), NA preserved.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_heterogeneity_p.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate P-value for Heterogeneity from Subgroup Summary Statistics  — leo_heterogeneity_p","title":"Calculate P-value for Heterogeneity from Subgroup Summary Statistics  — leo_heterogeneity_p","text":"function performs test heterogeneity (interaction) based summary statistics (Hazard Ratios P-values) subgroup analysis Cox model. uses Cochran's Q test.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_heterogeneity_p.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate P-value for Heterogeneity from Subgroup Summary Statistics  — leo_heterogeneity_p","text":"","code":"leo_heterogeneity_p(hrs, p_values, subgroup_names = NULL)"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_heterogeneity_p.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate P-value for Heterogeneity from Subgroup Summary Statistics  — leo_heterogeneity_p","text":"hrs numeric vector Hazard Ratios (HR) subgroup. p_values numeric vector corresponding P-values HR. subgroup_names optional character vector subgroup names display.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_heterogeneity_p.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate P-value for Heterogeneity from Subgroup Summary Statistics  — leo_heterogeneity_p","text":"list containing Q statistic, degrees freedom (df), P-value heterogeneity, -squared statistic. also prints summary console.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_heterogeneity_p.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate P-value for Heterogeneity from Subgroup Summary Statistics  — leo_heterogeneity_p","text":"","code":"# Example: Subgroup analysis by smoking status (Smoker vs. Non-smoker) hrs_example <- c(3.576652, 2.657723366) p_values_example <- c(0.012254053, 0.002129672) names_example <- c(\"Age>65\", \"Age<=65\") leo_heterogeneity_p(   hrs = hrs_example,   p_values = p_values_example,   subgroup_names = names_example ) #> --- Test for Heterogeneity in Subgroup Analysis --- #>  #> Input Data: #>   Subgroup       HR     P_value log_HR SE_log_HR #> 1   Age>65 3.576652 0.012254053 1.2744    0.5088 #> 2  Age<=65 2.657723 0.002129672 0.9775    0.3182 #>  #> Results of Cochran's Q Test: #> Q-statistic: 0.2448  #> Degrees of Freedom (df): 1  #> P-value for Heterogeneity: 0.621  #>  #> Heterogeneity Metrics: #> I^2 statistic: 0%  #> Interpretation of I^2: ~0-40% (might not be important); 30-60% (may represent moderate heterogeneity); 50-90% (may represent substantial heterogeneity); 75-100% (considerable heterogeneity). #>  #> ---------------------------------------------------"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_household_income.html","id":null,"dir":"Reference","previous_headings":"","what":"Recode household income (UKB 738) into readable categories — leo_household_income","title":"Recode household income (UKB 738) into readable categories — leo_household_income","text":"Recode UKB field 738 \"Average total household income tax\" 5 brackets plus \"Unknown\" (-1/-3/NA/blank).","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_household_income.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Recode household income (UKB 738) into readable categories — leo_household_income","text":"","code":"leo_household_income(p738_i0, ...)"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_household_income.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Recode household income (UKB 738) into readable categories — leo_household_income","text":"p738_i0 Household income tax (UKB 738, instance 0). Values: 1–5; -1/-3 -> Unknown. ... Reserved future use.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_household_income.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Recode household income (UKB 738) into readable categories — leo_household_income","text":"Character vector: \"0-18,000\", \"18,000-30,999\", \"31,000-51,999\", \"52,000-100,000\", \"100,000\", \"Unknown\".","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_household_income_2.html","id":null,"dir":"Reference","previous_headings":"","what":"Recode household income (UKB 738) into readable categories (2 categories) — leo_household_income_2","title":"Recode household income (UKB 738) into readable categories (2 categories) — leo_household_income_2","text":"five levels average total -tax household income classified “less ” “equal ” £31,000, closest UK median household income October 2009 (£27,530) Reference: Air Pollution, Genetic Factors, Risk Lung Cancer Prospective Study UK Biobank","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_household_income_2.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Recode household income (UKB 738) into readable categories (2 categories) — leo_household_income_2","text":"","code":"leo_household_income_2(p738_i0, ...)"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_household_income_2.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Recode household income (UKB 738) into readable categories (2 categories) — leo_household_income_2","text":"p738_i0 Household income tax (UKB 738, instance 0). ... Reserved future use.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_household_income_2.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Recode household income (UKB 738) into readable categories (2 categories) — leo_household_income_2","text":"Character vector","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_linear_regression.html","id":null,"dir":"Reference","previous_headings":"","what":"Linear regression analysis  — leo_linear_regression","title":"Linear regression analysis  — leo_linear_regression","text":"function performs linear regression analysis PRS clinical outcomes options handling missing values complete-case analysis imputation.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_linear_regression.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Linear regression analysis  — leo_linear_regression","text":"","code":"leo_linear_regression(   data,   y_var,   x_var,   covariates = NULL,   impute_na = FALSE,   impute_method = \"mean\",   ... )"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_linear_regression.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Linear regression analysis  — leo_linear_regression","text":"data data frame containing analysis data y_var name outcome variable (response) x_var name predictor variable (PRS) covariates Optional vector covariate names adjust impute_na Logical indicating whether impute missing values (default: FALSE) impute_method Imputation method use impute_na = TRUE ... Additional arguments passed imputation function","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_linear_regression.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Linear regression analysis  — leo_linear_regression","text":"list containing regression results including model, coefficients, fit statistics","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_linear_regression.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Linear regression analysis  — leo_linear_regression","text":"","code":"# Complete case analysis result_cc <- leo_linear_regression(prs_zh8, \"va1y\", \"PRS\",                                      covariates = c(\"age_onset\", \"gender\")) #> Error: object 'prs_zh8' not found  # With mean imputation result_imputed <- leo_linear_regression(prs_zh8, \"va1y\", \"PRS\",                                          covariates = c(\"age_onset\", \"gender\"),                                          impute_na = TRUE, impute_method = \"mean\") #> Error: object 'prs_zh8' not found"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_linear_regression_loop.html","id":null,"dir":"Reference","previous_headings":"","what":"Batch linear regression analysis for multiple predictors — leo_linear_regression_loop","title":"Batch linear regression analysis for multiple predictors — leo_linear_regression_loop","text":"function performs linear regression analysis multiple predictor variables single outcome, consistent formatting results.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_linear_regression_loop.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Batch linear regression analysis for multiple predictors — leo_linear_regression_loop","text":"","code":"leo_linear_regression_loop(data, y_var, x_vars, covariates = NULL, ...)"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_linear_regression_loop.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Batch linear regression analysis for multiple predictors — leo_linear_regression_loop","text":"data Data frame containing variables y_var Outcome variable name x_vars Vector predictor variable names test covariates Covariates adjust models ... Additional arguments passed leo_linear_regression","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_linear_regression_loop.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Batch linear regression analysis for multiple predictors — leo_linear_regression_loop","text":"data frame consolidated results regression models","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_linear_regression_loop.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Batch linear regression analysis for multiple predictors — leo_linear_regression_loop","text":"","code":"# Analyze multiple PRS methods against the same outcome x_vars <- c(\"PRS_plink\", \"PRS_catboost\", \"PRS_lasso\") results <- leo_linear_regression_loop(prs_zh8, \"va1y\", x_vars,                                      covariates = c(\"age_onset\", \"gender\")) #> ℹ [15:28:04] leo_linear_regression_loop function placeholder - to be implemented #> ℹ [15:28:04] Would analyze 3 predictors against outcome va1y"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_logistic_regression.html","id":null,"dir":"Reference","previous_headings":"","what":"General looped logistic regression: y (binary) ~ x (+ covariates) — leo_logistic_regression","title":"General looped logistic regression: y (binary) ~ x (+ covariates) — leo_logistic_regression","text":"Loop multiple exposures (x) fit logistic regressions single binary outcome (y). Input data frames must first column individual ID. Covariates optional.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_logistic_regression.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"General looped logistic regression: y (binary) ~ x (+ covariates) — leo_logistic_regression","text":"","code":"leo_logistic_regression(   x,   y,   cov = NULL,   x_col = NULL,   y_col = NULL,   id_col = \"id\",   y_level = c(\"0\", \"1\"),   y_label = c(\"0\", \"1\"),   scale_x = F,   na_action = \"na.omit\",   verbose = TRUE )"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_logistic_regression.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"General looped logistic regression: y (binary) ~ x (+ covariates) — leo_logistic_regression","text":"x Data frame (first col = ID) exposures; remaining columns candidate predictors (numeric factor). y Data frame (first col = ID) binary outcome; one column used (see y_col). numeric, can 0/1 two distinct numeric codes; factor/character, must exactly two levels. cov Optional data frame (first col = ID) covariates; remaining columns covariates. x_col Character vector exposure column names x; default: columns 2nd. y_col Outcome column name y; default: 2nd column y. id_col Shared ID column name x/y/cov; default \"id\". y_level Two labels found y define reference/contrast order (first = reference); default c(\"0\",\"1\"). y_label Descriptive names print logs parallel y_level; default c(\"0\",\"1\"). scale_x Logical; TRUE, scale() numeric exposures; default FALSE. na_action One \"na.omit\" \"na.exclude\"; default \"na.omit\". verbose Logical; FALSE, suppress logs; default TRUE.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_logistic_regression.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"General looped logistic regression: y (binary) ~ x (+ covariates) — leo_logistic_regression","text":"tibble; exposure may produce multiple rows categorical: x_name: exposure variable name x_type: \"numeric\" \"factor\" x_level: \"(continuous)\" numeric; factor: level name（参考水平标注为 \"(ref)\"） ref_level: reference level（factor 才有；numeric 为 NA） y_name: outcome variable name n: number non-missing samples used r2_mcfadden: McFadden's pseudo-R² = 1 - (model deviance / null deviance) beta, se, z, p: coefficient logit scale (per 1SD scale_x=TRUE) ci_l, ci_u: 95\\ , OR_CI_l, OR_CI_u: odds ratio 95\\ p_adj: BH-adjusted p-value across rows run","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_logistic_regression.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"General looped logistic regression: y (binary) ~ x (+ covariates) — leo_logistic_regression","text":"","code":"# --- Example 1: numeric outcome 0/1, numeric exposure (scaled), no covariates --- set.seed(10) x <- tibble::tibble(id = 1:300, PRS = rnorm(300)) linpred <- 0.8 * scale(x$PRS)[,1] y <- tibble::tibble(id = 1:300, outcome = rbinom(300, 1, prob = stats::plogis(linpred))) res1 <- leo_logistic_regression(x = x, y = y, x_col = \"PRS\", y_col = \"outcome\",                                 id_col = \"id\", scale_x = T,                                 y_level = c(\"0\",\"1\"), y_label = c(\"control\",\"case\")) #> ℹ [15:28:04] Performing logistic regression with settings: #> y = outcome (0=control, 1=case) #> x = PRS #> cov = (none) #> ✔ [15:28:04] Completed. Processed 1 exposure(s). N range: 300–300. head(res1) #> # A tibble: 1 × 17 #>   x_name x_type  x_level    ref_level y_name     n r2_mcfadden  beta    se     z #>   <chr>  <chr>   <chr>      <chr>     <chr>  <int>       <dbl> <dbl> <dbl> <dbl> #> 1 PRS    numeric (continuo… NA        outco…   300      0.0980 0.803 0.137  5.87 #> # ℹ 7 more variables: p <dbl>, ci_l <dbl>, ci_u <dbl>, OR <dbl>, OR_CI_l <dbl>, #> #   OR_CI_u <dbl>, p_adj <dbl>  # --- Example 2: factor exposure with explicit reference level, plus covariates --- set.seed(11) x2 <- tibble::tibble(id = 1:400,                      group = factor(sample(c(\"A\",\"B\",\"C\"), 400, T), levels = c(\"A\",\"B\",\"C\")))  # A is ref cov2 <- tibble::tibble(id = 1:400, age = rnorm(400, 50, 10)) y2  <- tibble::tibble(id = 1:400, outcome = rbinom(400, 1, 0.4)) res2 <- leo_logistic_regression(x = x2, y = y2, cov = cov2,                                 x_col = \"group\", y_col = \"outcome\",                                 id_col = \"id\", scale_x = F,                                 y_level = c(\"0\",\"1\"), y_label = c(\"control\",\"case\")) #> ℹ [15:28:04] Performing logistic regression with settings: #> y = outcome (0=control, 1=case) #> x = group #> cov = age #> ! [15:28:04] Exposure 'group' is categorical; please ensure factor() with first level as reference. Levels: A, B, C (ref = A). #> ℹ [15:28:04] For categorical exposure 'group', interpretation is vs reference 'A'. #> ✔ [15:28:04] Completed. Processed 1 exposure(s). N range: 400–400. res2 #> # A tibble: 3 × 17 #>   x_name x_type x_level ref_level y_name     n r2_mcfadden    beta     se      z #>   <chr>  <chr>  <chr>   <chr>     <chr>  <int>       <dbl>   <dbl>  <dbl>  <dbl> #> 1 group  factor (ref)   A         outco…   400     0.00404 NA      NA     NA     #> 2 group  factor B       A         outco…   400     0.00404 -0.269   0.250 -1.07  #> 3 group  factor C       A         outco…   400     0.00404 -0.0341  0.248 -0.138 #> # ℹ 7 more variables: p <dbl>, ci_l <dbl>, ci_u <dbl>, OR <dbl>, OR_CI_l <dbl>, #> #   OR_CI_u <dbl>, p_adj <dbl>"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_new_clinical_indicators.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate New Clinical Indicators — leo_new_clinical_indicators","title":"Generate New Clinical Indicators — leo_new_clinical_indicators","text":"function applies specific functions generate new clinical indicators. designed work vectors (e.g., columns dataframe).","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_new_clinical_indicators.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate New Clinical Indicators — leo_new_clinical_indicators","text":"","code":"leo_new_clinical_indicators(   df,   types = c(\"eGDR\", \"TyG\"),   type_id = TRUE,   remove_assist = TRUE,   remove_other = TRUE,   ... )"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_new_clinical_indicators.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate New Clinical Indicators — leo_new_clinical_indicators","text":"df dataframe containing required columns calculation. types vector indicator types, options \"eGDR\", \"TyG\", \"sleep_score\", \"LGI\"... type_id Logical; FALSE, function expects semantic column names (e.g. \"age\", \"BMI\"). TRUE (default), UKB field-id style names (e.g. \"p21003_i0\") used. remove_assist Logical, whether remove assisting columns (default TRUE). remove_other Logical, whether keep eid newly generated indicator columns returned dataframe (default TRUE). FALSE, original columns df kept. ... Additional parameters passed specific indicator calculation functions.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_new_clinical_indicators.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate New Clinical Indicators — leo_new_clinical_indicators","text":"dataframe containing new clinical indicators.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_new_clinical_indicators.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Generate New Clinical Indicators — leo_new_clinical_indicators","text":"Supported indicators (use values types): Basics: age, BMI, gender, ethnicity, ethnicity_finer. Socioeconomic: tdi, education, household_income, household_income_2, career. Inflammation: LGI. Insulin resistance: hba1c, hba1c_percent, eGDR, TyG. Lifestyle: smoking_status, drinking_status, diet_us, physical_activity, sleep_score.","code":""},{"path":[]},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_new_clinical_indicators.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generate New Clinical Indicators — leo_new_clinical_indicators","text":"","code":"df <- data.frame(   hba1c = c(48, 55, 60),   waist = c(80, 85, 90),   hypertension = c(1, 0, 1),   triglycerides = c(1.5, 1.8, 2.0),   glucose = c(5.0, 5.5, 6.0) ) leo.ukb::leo_new_clinical_indicators(df, types = c(\"eGDR\", \"TyG\")) #> ── Generating new clinical indicator: eGDR ───────────────────────────────────── #> ℹ Checking if all required column is valid for eGDR calculation. #> ✖ Missing: p30750_i0, p48_i0. Skip eGDR #> ── Generating new clinical indicator: TyG ────────────────────────────────────── #> ℹ Checking if all required column is valid for TyG calculation. #> ✖ Missing: p30870_i0, p30740_i0. Skip TyG #> Error in dplyr::select(., eid, all_of(generated_types)): Can't select columns that don't exist. #> ✖ Column `eid` doesn't exist."},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_physical_activity.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Physical Activity Indicator  — leo_physical_activity","title":"Calculate Physical Activity Indicator  — leo_physical_activity","text":", using IPAQ minutes/week input, classify regular activity according AHA (150/75/equivalent combination) rules: Moderate:  \\(\\ge 150\\) min/week; Vigorous:  \\(\\ge 75\\) min/week; Equivalent: \\(moderate + 2 \\times vigorous \\ge 150.\\)","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_physical_activity.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Physical Activity Indicator  — leo_physical_activity","text":"","code":"leo_physical_activity(p884_i0, p894_i0, p904_i0, p914_i0, ...)"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_physical_activity.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Physical Activity Indicator  — leo_physical_activity","text":"p884_i0 Moderate activity days/week (10+ min). UKB 884; -1/-3 -> NA. p894_i0 Moderate activity minutes/day (typical day). UKB 894; -1/-3 -> NA. p904_i0 Vigorous activity days/week (10+ min). UKB 904; -1/-3 -> NA. p914_i0 Vigorous activity minutes/day (typical day). UKB 914; -1/-3 -> NA. ... Reserved future use.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_physical_activity.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Physical Activity Indicator  — leo_physical_activity","text":"Factor levels c(\"Non-regular\", \"Regular\"); NA insufficient data.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_physical_activity.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Calculate Physical Activity Indicator  — leo_physical_activity","text":"Adults pursue least 150 minutes per week moderate-intensity physical activity, 75 minutes per week vigorous-intensity aerobic physical activity, equivalent combination moderate- vigorous-intensity aerobic activities. (Circulation, 2010, source) ≥150 min/wk moderate intensity ≥75 min/wk vigorous intensity Combination","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_quantile.html","id":null,"dir":"Reference","previous_headings":"","what":"Bin a continuous variable by quantiles — leo_quantile","title":"Bin a continuous variable by quantiles — leo_quantile","text":"lightweight wrapper cut() using quantile-based breaks (equal-frequency).","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_quantile.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Bin a continuous variable by quantiles — leo_quantile","text":"","code":"leo_quantile(   x,   bins = 4,   labels = NULL,   right = TRUE,   include_lowest = TRUE,   ... )"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_quantile.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Bin a continuous variable by quantiles — leo_quantile","text":"x Numeric/character vector. bins Integer; number quantile bins (default 4). labels Character vector; default uses \"Q1..Qk\". right Logical; passed cut(). include_lowest Logical; passed cut(). ... Reserved future use.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_quantile.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Bin a continuous variable by quantiles — leo_quantile","text":"Character vector quantile bins; NA preserved.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_quantile.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Bin a continuous variable by quantiles — leo_quantile","text":"","code":"x <- c(1:10, NA_integer_) q4 <- leo_quantile(x, bins = 4); q4 #>  [1] \"Q1\" \"Q1\" \"Q1\" \"Q2\" \"Q2\" \"Q3\" \"Q3\" \"Q4\" \"Q4\" \"Q4\" NA   table(q4, useNA = \"ifany\") #> q4 #>   Q1   Q2   Q3   Q4 <NA>  #>    3    2    2    3    1   x_tie <- c(rep(1L, 6), rep(2L, 6)) q4_tie <- leo_quantile(x_tie, bins = 4); q4_tie #> ! leo_quantile(): duplicated break points detected (ties). Collapsing duplicates. #>  [1] \"Q1\" \"Q1\" \"Q1\" \"Q1\" \"Q1\" \"Q1\" \"Q2\" \"Q2\" \"Q2\" \"Q2\" \"Q2\" \"Q2\" table(q4_tie, useNA = \"ifany\") #> q4_tie #> Q1 Q2  #>  6  6"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_regression_result.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract and format linear regression results for publication  — leo_regression_result","title":"Extract and format linear regression results for publication  — leo_regression_result","text":"function extracts key results linear regression models formats publication-ready table standardized effect sizes confidence intervals.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_regression_result.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract and format linear regression results for publication  — leo_regression_result","text":"","code":"leo_regression_result(   regression_result,   round_digits = 3,   include_ci = TRUE,   include_stats = TRUE )"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_regression_result.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract and format linear regression results for publication  — leo_regression_result","text":"regression_result List object returned leo_linear_regression function round_digits Number digits round numeric values (default: 3) include_ci Whether include confidence intervals (default: TRUE) include_stats Whether include model statistics (R², sample size) (default: TRUE)","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_regression_result.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract and format linear regression results for publication  — leo_regression_result","text":"data frame formatted regression results suitable publication","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_regression_result.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extract and format linear regression results for publication  — leo_regression_result","text":"","code":"# Run regression result <- leo_linear_regression(prs_zh8, \"va1y\", \"PRS\", covariates = c(\"age_onset\", \"gender\")) #> Error: object 'prs_zh8' not found  # Format results for publication pub_table <- leo_regression_result(result) #> Error: object 'result' not found print(pub_table) #> Error: object 'pub_table' not found"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_sleep_score.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Sleep Score and Pattern — leo_sleep_score","title":"Calculate Sleep Score and Pattern — leo_sleep_score","text":"Compute 0-5 sleep health score based 5 components: Sleep duration (7-8h) Chronotype (morning person) insomnia snoring daytime sleepiness","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_sleep_score.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Sleep Score and Pattern — leo_sleep_score","text":"","code":"leo_sleep_score(p1160_i0, p1180_i0, p1200_i0, p1210_i0, p1220_i0, ...)"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_sleep_score.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Sleep Score and Pattern — leo_sleep_score","text":"p1160_i0 Sleep duration (hours). UKB 1160; 7-8h scores 1. p1180_i0 Chronotype. UKB 1180; 1/2 (morning) scores 1; -1/-3 -> NA. p1200_i0 Insomnia. UKB 1200; 1 (never/rarely) scores 1; -3 -> NA. p1210_i0 Snoring. UKB 1210; 2 () scores 1; -1/-3 -> NA. p1220_i0 Daytime sleepiness. UKB 1220; 0/1 (never/rarely) scores 1; -1/-3 -> NA. ... Reserved future use.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_sleep_score.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Sleep Score and Pattern — leo_sleep_score","text":"Factor levels c(\"poor\", \"intermediate\", \"healthy\"); based score: 0-1=poor, 2-3=intermediate, 4-5=healthy.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_smoking_status.html","id":null,"dir":"Reference","previous_headings":"","what":"Recode smoking status (Never/Previous/Current) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=20116 — leo_smoking_status","title":"Recode smoking status (Never/Previous/Current) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=20116 — leo_smoking_status","text":"Recode smoking status (Never/Previous/Current) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=20116","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_smoking_status.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Recode smoking status (Never/Previous/Current) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=20116 — leo_smoking_status","text":"","code":"leo_smoking_status(smoking_status, ...)"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_smoking_status.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Recode smoking status (Never/Previous/Current) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=20116 — leo_smoking_status","text":"smoking_status Numeric/character vector, usually p20116.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_smoking_status.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Recode smoking status (Never/Previous/Current) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=20116 — leo_smoking_status","text":"Factor levels \"Never\", \"Previous\", \"Current\"; NA negative/special codes others.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_tdi.html","id":null,"dir":"Reference","previous_headings":"","what":"Recode Townsend deprivation index (TDI) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=22189 — leo_tdi","title":"Recode Townsend deprivation index (TDI) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=22189 — leo_tdi","text":"Recode Townsend deprivation index (TDI) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=22189","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_tdi.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Recode Townsend deprivation index (TDI) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=22189 — leo_tdi","text":"","code":"leo_tdi(tdi, ...)"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_tdi.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Recode Townsend deprivation index (TDI) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=22189 — leo_tdi","text":"tdi Numeric/character vector, usually p22189.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/leo_tdi.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Recode Townsend deprivation index (TDI) https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=22189 — leo_tdi","text":"Numeric vector, UKB special codes -3/-1 recoded NA.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/recode_na31.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper function to recode UKB special values (-3/-1) to NA — recode_na31","title":"Helper function to recode UKB special values (-3/-1) to NA — recode_na31","text":"Helper function recode UKB special values (-3/-1) NA","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/recode_na31.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Helper function to recode UKB special values (-3/-1) to NA — recode_na31","text":"","code":"recode_na31(x)"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/recode_na31.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Helper function to recode UKB special values (-3/-1) to NA — recode_na31","text":"Used UK Biobank data-codings -1 = \"know\" -3 = \"Prefer answer\".","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/recode_na31neg10.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper function to recode UKB special values (-3/-1 to NA and -10 to 0) — recode_na31neg10","title":"Helper function to recode UKB special values (-3/-1 to NA and -10 to 0) — recode_na31neg10","text":"Helper function recode UKB special values (-3/-1 NA -10 0)","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/recode_na31neg10.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Helper function to recode UKB special values (-3/-1 to NA and -10 to 0) — recode_na31neg10","text":"","code":"recode_na31neg10(x)"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/recode_na31neg10.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Helper function to recode UKB special values (-3/-1 to NA and -10 to 0) — recode_na31neg10","text":"UK Biobank fields -10 encodes \"Less \" treated 0; -1 = \"know\", -3 = \"Prefer answer\".","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/ukb_hla_clean.html","id":null,"dir":"Reference","previous_headings":"","what":"Clean HLA carrier output to a wide format — ukb_hla_clean","title":"Clean HLA carrier output to a wide format — ukb_hla_clean","text":"Convert long table returned ukb_hla_specify() wide table suitable downstream analysis: eid, <allele>, <allele>_carrier, ...","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/ukb_hla_clean.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Clean HLA carrier output to a wide format — ukb_hla_clean","text":"","code":"ukb_hla_clean(res)"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/ukb_hla_clean.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Clean HLA carrier output to a wide format — ukb_hla_clean","text":"res data.frame columns eid, query, copies, carrier.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/ukb_hla_clean.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Clean HLA carrier output to a wide format — ukb_hla_clean","text":"wide-format data.frame one row per eid.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/ukb_hla_clean.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Clean HLA carrier output to a wide format — ukb_hla_clean","text":"","code":"hla <- fread(\"/Users/leoarrow/Project/UKB/data/HLA.csv\") %>%   ukb_hla_typing(header) %>%   ukb_hla_specify(\"B27\") %>%   ukb_hla_clean() #> Error in fread(\"/Users/leoarrow/Project/UKB/data/HLA.csv\") %>% ukb_hla_typing(header) %>%     ukb_hla_specify(\"B27\") %>% ukb_hla_clean(): could not find function \"%>%\""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/ukb_hla_header.html","id":null,"dir":"Reference","previous_headings":"","what":"Read UK Biobank HLA v2 header (ukb_hla_v2.txt)  — ukb_hla_header","title":"Read UK Biobank HLA v2 header (ukb_hla_v2.txt)  — ukb_hla_header","text":"Downloads parses HLA v2 header file used decode UK Biobank Field 22182 (HLA imputation v2; best-guess probabilities).","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/ukb_hla_header.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Read UK Biobank HLA v2 header (ukb_hla_v2.txt)  — ukb_hla_header","text":"","code":"ukb_hla_header()"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/ukb_hla_header.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Read UK Biobank HLA v2 header (ukb_hla_v2.txt)  — ukb_hla_header","text":"character vector allele column names (e.g., \"A_101\", \"B_2705\", ...).","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/ukb_hla_header.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Read UK Biobank HLA v2 header (ukb_hla_v2.txt)  — ukb_hla_header","text":"returned character vector column order (length typically 362) corresponding comma-separated values field 22182. function tries readLines() first. fails, falls back system wget call (useful clusters). fail, errors.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/ukb_hla_header.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Read UK Biobank HLA v2 header (ukb_hla_v2.txt)  — ukb_hla_header","text":"","code":"header <- ukb_hla_header() #> ℹ [15:28:06] Loading UKB HLA header; description source: https://biobank.ctsu.ox.ac.uk/crystal/refer.cgi?id=2182 head(header) #> [1] \"A_101\" \"A_102\" \"A_103\" \"A_201\" \"A_202\" \"A_203\""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/ukb_hla_specify.html","id":null,"dir":"Reference","previous_headings":"","what":"Specify carrier status for given HLA allele(s) in UK Biobank  — ukb_hla_specify","title":"Specify carrier status for given HLA allele(s) in UK Biobank  — ukb_hla_specify","text":"Extract per-individual carrier status (0/1/2 copies) user-specified HLA allele queries output ukb_hla_typing().","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/ukb_hla_specify.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Specify carrier status for given HLA allele(s) in UK Biobank  — ukb_hla_specify","text":"","code":"ukb_hla_specify(res, specify_alleles = \"B27\")"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/ukb_hla_specify.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Specify carrier status for given HLA allele(s) in UK Biobank  — ukb_hla_specify","text":"res Output ukb_hla_typing(), .e. list(calls=..., genotype=...). specify_alleles Character vector allele queries. Multiple formats supported: Family-level (2-digit) queries (matches xx:yy within family): \"B27\" \"HLA-B27\"  Matches HLA-B*27:xx. \"B*27\" \"B*27:\"  Matches HLA-B*27:xx. \"DQB1*06\"  Matches HLA-DQB1*06:xx. Exact (4-digit) allele queries (matches specific xx:yy allele): \"*02:01\" \"HLA-*02:01\"  Matches exactly HLA-*02:01. \"B*27:05\" \"HLA-B*27:05\"  Matches exactly HLA-B*27:05. UK Biobank header-style queries (column name Field 22182 header): \"DRB1_1501\", \"B_2705\", \"C_401\"  Converted internally HLA-<locus>*xx:yy (e.g. \"B_2705\" -> \"HLA-B*27:05\"). Three-digit codes left-padded four digits (e.g. \"C_401\" -> \"HLA-C*04:01\").","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/ukb_hla_specify.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Specify carrier status for given HLA allele(s) in UK Biobank  — ukb_hla_specify","text":"table one row per eid × query, containing: eid Individual identifier (eid HLA data). query original query string provided specify_alleles. locus Parsed locus (e.g., \"B\", \"\", \"DRB1\"). copies Integer 0/1/2 indicating total number matched allele copies. carrier Logical; TRUE copies > 0. matched Matched allele_pretty values (semicolon-separated); NA non-carrier. max_q Maximum posterior (per-allele) among matched calls; NA non-carrier. , recommend use code examples convert wide format downstream analysis.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/ukb_hla_specify.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Specify carrier status for given HLA allele(s) in UK Biobank  — ukb_hla_specify","text":"function searches within res$calls (already filtered posterior threshold ukb_hla_typing()) returns, query, copy number carried individual. returned copy number (copies) derived summing allele_copies among matched calls res$calls. Since res$calls already filtered posterior threshold ukb_hla_typing(), function reports carriers based retained (high-confidence) allele calls.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/ukb_hla_specify.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Specify carrier status for given HLA allele(s) in UK Biobank  — ukb_hla_specify","text":"","code":"# `res` are from ukb_hla_typing() # 1) Single query: family-level (2-digit) res_s1 <- ukb_hla_specify(res, \"B27\") #> ℹ [15:28:08] ukb_hla_specify: extracting B27 #> Error: object 'res' not found # 2) Multiple queries: mixed formats res_s2 <- ukb_hla_specify(res, c(\"B27\", \"A*02:01\", \"DRB1_1501\")) #> ℹ [15:28:08] ukb_hla_specify: extracting B27, A*02:01, DRB1_1501 #> Error: object 'res' not found # 3) Queries with optional HLA- prefix and family-level with \"*\" res_s3 <- ukb_hla_specify(res, c(\"HLA-B27\", \"DQB1*06\")) #> ℹ [15:28:08] ukb_hla_specify: extracting HLA-B27, DQB1*06 #> Error: object 'res' not found  ### Now normally we only need to know if one is a carrier for each allele # Create a downstream-friendly wide table: # eid, <query1>, <query1>_carrier, <query2>, <query2>_carrier, ... carrier_wide <- res_s2 %>%   transmute(eid, query,             copies = as.integer(copies),             carrier01 = as.integer(carrier)) %>%   pivot_longer(c(copies, carrier01), names_to = \"stat\", values_to = \"value\") %>%   mutate(key = if_else(stat == \"copies\", query, paste0(query, \"_carrier\"))) %>%   select(eid, key, value) %>%   pivot_wider(names_from = key, values_from = value,               values_fill = list(value = 0L)) #> Error in res_s2 %>% transmute(eid, query, copies = as.integer(copies),     carrier01 = as.integer(carrier)) %>% pivot_longer(c(copies,     carrier01), names_to = \"stat\", values_to = \"value\") %>% mutate(key = if_else(stat ==     \"copies\", query, paste0(query, \"_carrier\"))) %>% select(eid,     key, value) %>% pivot_wider(names_from = key, values_from = value,     values_fill = list(value = 0L)): could not find function \"%>%\""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/ukb_hla_typing.html","id":null,"dir":"Reference","previous_headings":"","what":"HLA Genotyping in UKB  — ukb_hla_typing","title":"HLA Genotyping in UKB  — ukb_hla_typing","text":"Parse UK Biobank HLA v2 compound field (22182) derive per-locus genotypes","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/ukb_hla_typing.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"HLA Genotyping in UKB  — ukb_hla_typing","text":"","code":"ukb_hla_typing(df, header, col = \"p22182\", q_threshold = 0.7)"},{"path":"https://laleoarrow.github.io/leo.ukb/reference/ukb_hla_typing.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"HLA Genotyping in UKB  — ukb_hla_typing","text":"df data.frame/tibble eid compound column (default p22182). header Allele column order, e.g. ukb_hla_header() (character vector). col Compound column name. Default \"p22182\". q_threshold Posterior threshold (UKB commonly uses 0.7). Default 0.7.","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/ukb_hla_typing.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"HLA Genotyping in UKB  — ukb_hla_typing","text":"list : calls: data.table per-allele calls (eid, locus, allele, allele_pretty, allele_copies, allele_q). genotype: data.table per-locus genotype strings (eid, locus, genotype).","code":""},{"path":"https://laleoarrow.github.io/leo.ukb/reference/ukb_hla_typing.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"HLA Genotyping in UKB  — ukb_hla_typing","text":"","code":"if (FALSE) { # \\dontrun{ library(tidyverse) # x <- data.table::fread(\"~/Project/UKB/data/HLA.csv\") # x <- data.table::fread(\"HLA.csv\")         # eid + p22182 header <- ukb_hla_header() res <- ukb_hla_typing(x, header) res$genotype %>% dplyr::filter(locus == \"B\") %>% dplyr::slice_head(n = 5) } # }"}]
